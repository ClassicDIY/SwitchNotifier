#pragma once

const char home_html[] PROGMEM = R"rawliteral(
	<!DOCTYPE html><html lang=\"en\">
	<head><meta name=\"viewport\" content=\"width=device-width, initial-scale=1, user-scalable=no\"/>
	<title>{n}</title>

	<script>
		function initWebSocket() {
		  const socket = new WebSocket('ws://' + window.location.hostname + '/ws_home');
		  socket.onmessage = function(event) {
				const gpioValues = JSON.parse(event.data);
				for (const [key, value] of Object.entries(gpioValues)) {
					// console.log(`Pin: ${key}, State: ${value}`);
					const el = document.getElementById(`${key}`);
					if (el) {
						const isNumeric = !isNaN(`${value}`);
						if (isNumeric) {
							el.innerText = `${key}: ${value}`;
							el.style.backgroundColor = 'yellow';
						} else {
							if (`${value}` === `High` || `${value}` === `On`) {
								el.style.backgroundColor = 'green';
							} else {
								el.style.backgroundColor = 'red';
							}
						}
					}
				}
			};

			socket.onerror = function(error) {
      			console.error('WebSocket error:', error);
    		};

			window.addEventListener('beforeunload', function() {
				if (socket) {
					socket.close();
				}
			});
		}

		window.onload = function() {
		  initWebSocket();
		}
	</script>
	{style}
	</head>
  	<body>
	<div id="home">
		<h2>{n}</h2>
		<div style='font-size: .6em;'>Firmware version '{v}'</div>
		<hr>
		<div class="container">
			<div class="home-group">
				<div id="boxes-container">
					<fieldset class="fs">
					<legend>SMTP</legend>
					{smtpSettings}
					</fieldset>
					<fieldset class="fs">
					<legend>Email Messages</legend>
					{emailMessages}
					</fieldset>
				</div>
				<div class="link-row">
					<p><a href='settings'>Settings</a></p>
					<p><a href='/log' target='_blank'>Web Log</a></p>
				</div>
			</div>
		</div>
	</div>
	</body></html>
	)rawliteral";

const char snmp_config_fieldset[] PROGMEM = R"rawliteral(
	<fieldset id="snmp" class="fs">
	<legend>SNMP</legend>
		<div class="conv">
			{snmp}
		</div>
	</fieldset>
)rawliteral";

const char snmp_input[] PROGMEM = R"rawliteral(
  <div class="form-grid">
    <label for="{fld}">{fldlabel}</label>
    <input type="text" id="{fld}" name="{fld}" value="{fldval}" maxlength="64">
  </div>
)rawliteral";

const char snmp_select[] PROGMEM = R"rawliteral(
  <div class="form-grid">
    <label for="{fld}">{fldlabel}</label>
    <select id="{fld}" name="{fld}">
		{options}
	</select>
  </div>
)rawliteral";

const char snmp_select_option[] PROGMEM = R"rawliteral(
  <option value="{fldval}" {selected}>{fldval}</option>
)rawliteral";

const char app_config_fieldset[] PROGMEM = R"rawliteral(
	<fieldset id="app" class="fs">
	<legend>Email Messages</legend>
		<div class="conv">
			{aconv}
		</div>
	</fieldset>
)rawliteral";

const char app_input[] PROGMEM = R"rawliteral(
  <div class="form-grid">
    <label for="message{bm}">Email text for button {bm}</label>
    <input type="text" id="message{bm}" name="message{bm}" value="{message}" maxlength="64">
  </div>
)rawliteral";